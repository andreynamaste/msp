/**
 * Модуль астрологических трактовок (интерпретаций)
 * Полные развернутые описания с плюсами, минусами и рекомендациями
 */

const INTERPRETATIONS = {
    // Трактовки асцендента в знаках
    ascendant: {
        0: { // Овен
            title: "Лагна в Овне (Меша)",
            description: "Овен - огненный, подвижный знак, управляемый Марсом. Личность энергичная, независимая и предприимчивая.",
            plusy: [
                "Сильная воля и решительность",
                "Лидерские качества и инициативность",
                "Физическая сила и энергия",
                "Смелость и храбрость",
                "Быстрота реакции"
            ],
            minusy: [
                "Импульсивность и нетерпение",
                "Агрессивность в поведении",
                "Эгоизм и самоуверенность",
                "Склонность к конфликтам",
                "Недостаток дипломатии"
            ],
            garmonizaciya: [
                "Практикуйте терпение и самоконтроль",
                "Занимайтесь спортом для выхода энергии",
                "Учитесь слушать других",
                "Медитация на спокойствие",
                "Носите красный коралл (мангала) для гармонизации Марса"
            ]
        },
        1: { // Телец
            title: "Лагна в Тельце (Вришабха)",
            description: "Телец - земной, фиксированный знак, управляемый Венерой. Личность стабильная, практичная и материалистичная.",
            plusy: [
                "Стабильность и надежность",
                "Практичность и здравый смысл",
                "Упорство в достижении целей",
                "Любовь к красоте и комфорту",
                "Хороший вкус и эстетическое чувство"
            ],
            minusy: [
                "Упрямство и негибкость",
                "Материализм и жадность",
                "Лень и инертность",
                "Привязанность к удовольствиям",
                "Медлительность в принятии решений"
            ],
            garmonizaciya: [
                "Развивайте гибкость мышления",
                "Практикуйте отстраненность от материального",
                "Занимайтесь йогой для подвижности",
                "Носите алмаз или белый сапфир (Венера)",
                "Жертвуйте часть дохода на благотворительность"
            ]
        },
        2: { // Близнецы
            title: "Лагна в Близнецах (Митхуна)",
            description: "Близнецы - воздушный, подвижный знак, управляемый Меркурием. Личность коммуникативная, интеллектуальная и любознательная.",
            plusy: [
                "Быстрый ум и интеллект",
                "Коммуникабельность и красноречие",
                "Многогранность интересов",
                "Способность к обучению",
                "Гибкость и адаптивность"
            ],
            minusy: [
                "Непостоянство и поверхностность",
                "Нервозность и тревожность",
                "Распыление энергии",
                "Болтливость и сплетни",
                "Отсутствие глубины"
            ],
            garmonizaciya: [
                "Практикуйте концентрацию и медитацию",
                "Развивайте глубину в одной области",
                "Контролируйте речь",
                "Носите изумруд (Меркурий)",
                "Занимайтесь дыхательными практиками (пранаяма)"
            ]
        },
        3: { // Рак
            title: "Лагна в Раке (Карка)",
            description: "Рак - водный, подвижный знак, управляемый Луной. Личность эмоциональная, чувствительная и заботливая.",
            plusy: [
                "Эмоциональная чувствительность и эмпатия",
                "Забота о близких",
                "Интуиция и воображение",
                "Хорошая память",
                "Привязанность к семье и дому"
            ],
            minusy: [
                "Эмоциональная нестабильность",
                "Обидчивость и ранимость",
                "Излишняя привязанность",
                "Склонность к депрессии",
                "Замкнутость в прошлом"
            ],
            garmonizaciya: [
                "Практикуйте эмоциональную стабильность",
                "Медитация на Луну (понедельники)",
                "Носите жемчуг или лунный камень",
                "Пост по понедельникам",
                "Проводите время у воды"
            ]
        },
        4: { // Лев
            title: "Лагна во Льве (Симха)",
            description: "Лев - огненный, фиксированный знак, управляемый Солнцем. Личность благородная, гордая и великодушная.",
            plusy: [
                "Благородство и великодушие",
                "Лидерские качества",
                "Уверенность в себе",
                "Творческие способности",
                "Щедрость и доброта"
            ],
            minusy: [
                "Гордыня и эгоизм",
                "Надменность и высокомерие",
                "Желание быть в центре внимания",
                "Деспотичность",
                "Расточительность"
            ],
            garmonizaciya: [
                "Развивайте скромность",
                "Служите другим без ожидания признания",
                "Медитация на Солнце (воскресенья)",
                "Носите рубин (Солнце)",
                "Практикуйте Сурья Намаскар (приветствие Солнцу)"
            ]
        },
        5: { // Дева
            title: "Лагна в Деве (Канья)",
            description: "Дева - земной, подвижный знак, управляемый Меркурием. Личность аналитическая, практичная и организованная.",
            plusy: [
                "Аналитический ум",
                "Внимание к деталям",
                "Организованность и порядок",
                "Склонность к служению",
                "Практичность"
            ],
            minusy: [
                "Чрезмерная критичность",
                "Перфекционизм",
                "Беспокойство о мелочах",
                "Зацикленность на недостатках",
                "Сложность в принятии несовершенства"
            ],
            garmonizaciya: [
                "Практикуйте принятие несовершенства",
                "Развивайте видение целого",
                "Носите изумруд (Меркурий)",
                "Служение нуждающимся",
                "Йога и медитация для снятия тревоги"
            ]
        },
        6: { // Весы
            title: "Лагна в Весах (Тула)",
            description: "Весы - воздушный, подвижный знак, управляемый Венерой. Личность гармоничная, дипломатичная и справедливая.",
            plusy: [
                "Чувство справедливости",
                "Дипломатичность и тактичность",
                "Любовь к красоте и гармонии",
                "Социальные способности",
                "Партнерская ориентация"
            ],
            minusy: [
                "Нерешительность",
                "Зависимость от мнения других",
                "Избегание конфликтов",
                "Поверхностность в отношениях",
                "Колебания в выборе"
            ],
            garmonizaciya: [
                "Развивайте самостоятельность в решениях",
                "Учитесь здоровому конфликту",
                "Носите алмаз или белый сапфир (Венера)",
                "Медитация на баланс",
                "Укрепляйте внутренний стержень"
            ]
        },
        7: { // Скорпион
            title: "Лагна в Скорпионе (Вришчика)",
            description: "Скорпион - водный, фиксированный знак, управляемый Марсом. Личность интенсивная, страстная и проницательная.",
            plusy: [
                "Глубина и интенсивность",
                "Проницательность и интуиция",
                "Сила воли и выносливость",
                "Способность к трансформации",
                "Интерес к тайнам и оккультизму"
            ],
            minusy: [
                "Ревность и собственничество",
                "Мстительность",
                "Склонность к манипуляциям",
                "Недоверие к людям",
                "Саморазрушительные тенденции"
            ],
            garmonizaciya: [
                "Практикуйте прощение и отпускание",
                "Трансмутируйте энергию через духовные практики",
                "Носите красный коралл (Марс)",
                "Медитация на трансформацию",
                "Практики кундалини йоги"
            ]
        },
        8: { // Стрелец
            title: "Лагна в Стрельце (Дхану)",
            description: "Стрелец - огненный, подвижный знак, управляемый Юпитером. Личность оптимистичная, философская и свободолюбивая.",
            plusy: [
                "Оптимизм и позитивное мышление",
                "Философский склад ума",
                "Стремление к высшим знаниям",
                "Честность и справедливость",
                "Щедрость и великодушие"
            ],
            minusy: [
                "Чрезмерная откровенность",
                "Отсутствие такта",
                "Догматизм в убеждениях",
                "Склонность к проповедям",
                "Непрактичность"
            ],
            garmonizaciya: [
                "Развивайте тактичность в общении",
                "Практикуйте гибкость в убеждениях",
                "Носите желтый сапфир (Юпитер)",
                "Изучайте священные писания",
                "Служение учителям и духовным наставникам"
            ]
        },
        9: { // Козерог
            title: "Лагна в Козероге (Макара)",
            description: "Козерог - земной, подвижный знак, управляемый Сатурном. Личность амбициозная, дисциплинированная и ответственная.",
            plusy: [
                "Дисциплина и ответственность",
                "Амбициозность и целеустремленность",
                "Терпение и выносливость",
                "Практичность и реализм",
                "Организаторские способности"
            ],
            minusy: [
                "Пессимизм и мрачность",
                "Жесткость и холодность",
                "Трудоголизм",
                "Недостаток спонтанности",
                "Боязнь неудачи"
            ],
            garmonizaciya: [
                "Развивайте оптимизм и радость",
                "Практикуйте расслабление",
                "Носите синий сапфир (Сатурн) - с осторожностью!",
                "Служение пожилым людям",
                "Медитация на принятие"
            ]
        },
        10: { // Водолей
            title: "Лагна в Водолее (Кумбха)",
            description: "Водолей - воздушный, фиксированный знак, управляемый Сатурном. Личность оригинальная, независимая и гуманная.",
            plusy: [
                "Оригинальность мышления",
                "Гуманность и альтруизм",
                "Независимость",
                "Прогрессивные взгляды",
                "Дружелюбие"
            ],
            minusy: [
                "Эксцентричность",
                "Отстраненность в отношениях",
                "Упрямство в идеях",
                "Непредсказуемость",
                "Отсутствие эмоциональности"
            ],
            garmonizaciya: [
                "Развивайте эмоциональную близость",
                "Практикуйте баланс между свободой и близостью",
                "Носите синий сапфир (Сатурн)",
                "Служение обществу",
                "Групповые медитации"
            ]
        },
        11: { // Рыбы
            title: "Лагна в Рыбах (Мина)",
            description: "Рыбы - водный, подвижный знак, управляемый Юпитером. Личность мечтательная, сострадательная и интуитивная.",
            plusy: [
                "Глубокая интуиция",
                "Сострадание и эмпатия",
                "Духовная ориентация",
                "Художественные способности",
                "Воображение"
            ],
            minusy: [
                "Непрактичность",
                "Избегание реальности",
                "Склонность к иллюзиям",
                "Эмоциональная нестабильность",
                "Жертвенность до самоотречения"
            ],
            garmonizaciya: [
                "Развивайте практичность",
                "Заземление через физические практики",
                "Носите желтый сапфир (Юпитер)",
                "Медитация и духовные практики",
                "Служение нуждающимся"
            ]
        }
    },
    
    // Трактовки планет в домах
    planetInHouse: {
        Sun: [
            "В 1-м доме: Сильная личность, лидерство, хорошее здоровье. Может быть эгоцентризм.",
            "Во 2-м доме: Богатство через свои усилия, красноречие. Возможны проблемы со зрением.",
            "В 3-м доме: Храбрость, младшие братья/сестры важны. Усилия приносят успех.",
            "В 4-м доме: Счастье от матери и дома. Возможны конфликты с отцом.",
            "В 5-м доме: Интеллект, хорошие дети, творчество. Благоприятная позиция.",
            "В 6-м доме: Победа над врагами, но проблемы со здоровьем отца.",
            "В 7-м доме: Сильный партнер, но возможны конфликты в браке.",
            "В 8-м доме: Интерес к оккультизму, трансформации. Сложности с отцом.",
            "В 9-м доме: Удача, духовность, хорошие отношения с отцом. Очень благоприятно.",
            "В 10-м доме: Успех в карьере, признание, высокий статус. Отличная позиция.",
            "В 11-м доме: Исполнение желаний, прибыль, влиятельные друзья.",
            "В 12-м доме: Духовность, расходы, жизнь за границей. Ослабленное эго."
        ],
        Moon: [
            "В 1-м доме: Эмоциональность, привлекательность, популярность. Переменчивость настроения.",
            "Во 2-м доме: Хорошая речь, богатство, крепкая семья. Любовь к еде.",
            "В 3-м доме: Храбрость, творчество, хорошие отношения с братьями/сестрами.",
            "В 4-м доме: Счастье от матери, недвижимость, эмоциональная стабильность. Очень благоприятно.",
            "В 5-м доме: Интеллект, эмоциональная связь с детьми, творчество.",
            "В 6-м доме: Эмоциональные проблемы, беспокойство, но победа над трудностями.",
            "В 7-м доме: Эмоциональный партнер, счастье в браке, популярность.",
            "В 8-м доме: Эмоциональные трансформации, интуиция, но тревожность.",
            "В 9-м доме: Духовность, удача, хорошие отношения с матерью.",
            "В 10-м доме: Успех в карьере через эмоциональный интеллект, популярность.",
            "В 11-м доме: Исполнение желаний, прибыль, много друзей.",
            "В 12-м доме: Духовность, медитация, но эмоциональное одиночество."
        ],
        Mars: [
            "В 1-м доме: Энергия, храбрость, лидерство. Импульсивность, шрамы на теле.",
            "Во 2-м доме: Богатство через усилия, резкая речь. Проблемы в семье.",
            "В 3-м доме: Храбрость, успех через усилия, хорошие братья/сестры.",
            "В 4-м доме: Проблемы с матерью, недвижимостью. Мангал Доша для брака.",
            "В 5-м доме: Интеллект, но конфликты с детьми. Склонность к азарту.",
            "В 6-м доме: Победа над врагами, хорошее здоровье. Благоприятная позиция.",
            "В 7-м доме: Мангал Доша - конфликты в браке. Нужна гармонизация.",
            "В 8-м доме: Интерес к оккультизму, трансформации. Мангал Доша.",
            "В 9-м доме: Духовная энергия, но конфликты с учителями.",
            "В 10-м доме: Успех в карьере через усилия, лидерство.",
            "В 11-м доме: Прибыль, исполнение желаний через действия.",
            "В 12-м доме: Расходы на хорошие цели, но потеря энергии. Мангал Доша."
        ],
        Mercury: [
            "В 1-м доме: Интеллект, коммуникабельность, способности к обучению.",
            "Во 2-м доме: Богатство, красноречие, хорошая семья.",
            "В 3-м доме: Отличные коммуникативные навыки, успех в писательстве, СМИ.",
            "В 4-м доме: Образование, счастье от матери, недвижимость.",
            "В 5-м доме: Высокий интеллект, способности к обучению, хорошие дети.",
            "В 6-м доме: Победа через интеллект, но беспокойство ума.",
            "В 7-м доме: Интеллектуальный партнер, успех в партнерстве.",
            "В 8-м доме: Интерес к оккультным знаниям, трансформация через учебу.",
            "В 9-м доме: Высшее образование, удача, духовные знания.",
            "В 10-м доме: Успех в карьере через интеллект, бизнес, коммуникации.",
            "В 11-м доме: Прибыль через интеллект, образованные друзья.",
            "В 12-м доме: Духовные знания, но рассеянность."
        ],
        Jupiter: [
            "В 1-м доме: Мудрость, оптимизм, духовность. Благословенная жизнь.",
            "Во 2-м доме: Богатство, хорошая речь, крепкая семья.",
            "В 3-м доме: Храбрость, хорошие братья/сестры, успех через усилия.",
            "В 4-м доме: Счастье от матери, недвижимость, образование.",
            "В 5-м доме: Высокий интеллект, хорошие дети, творчество. Очень благоприятно.",
            "В 6-м доме: Победа над врагами и болезнями через мудрость.",
            "В 7-м доме: Мудрый партнер, счастливый брак.",
            "В 8-м доме: Долголетие, трансформация через мудрость, наследство.",
            "В 9-м доме: Духовность, удача, учителя. Наилучшая позиция для Юпитера.",
            "В 10-м доме: Успех в карьере, признание, высокий статус.",
            "В 11-м доме: Большая прибыль, исполнение желаний.",
            "В 12-м доме: Духовность, медитация, расходы на благие цели."
        ],
        Venus: [
            "В 1-м доме: Красота, обаяние, артистизм. Любовь к комфорту.",
            "Во 2-м доме: Богатство, красивая речь, любовь к роскоши.",
            "В 3-м доме: Творчество, артистизм, хорошие отношения с братьями/сестрами.",
            "В 4-м доме: Счастье от матери, красивый дом, комфорт.",
            "В 5-м доме: Романтика, творчество, любовь к детям.",
            "В 6-м доме: Проблемы в отношениях, но красота побеждает врагов.",
            "В 7-м доме: Счастливый брак, красивый партнер. Очень благоприятно.",
            "В 8-м доме: Трансформация через отношения, наследство от супруга.",
            "В 9-м доме: Удача через брак, любовь к путешествиям.",
            "В 10-м доме: Успех в творческой карьере, искусстве.",
            "В 11-м доме: Прибыль, исполнение желаний, много друзей.",
            "В 12-м доме: Расходы на роскошь, романтика за границей."
        ],
        Saturn: [
            "В 1-м доме: Дисциплина, ответственность, но задержки в жизни.",
            "Во 2-м доме: Заработок через тяжелый труд, экономность.",
            "В 3-м доме: Упорные усилия, ответственность к братьям/сестрам.",
            "В 4-м доме: Проблемы с матерью, задержки в приобретении недвижимости.",
            "В 5-м доме: Задержки с детьми, серьезный интеллект.",
            "В 6-м доме: Победа над врагами через терпение. Благоприятная позиция.",
            "В 7-м доме: Задержки в браке, серьезный партнер.",
            "В 8-м доме: Долголетие, интерес к оккультизму, трансформации через страдания.",
            "В 9-м доме: Задержки в удаче, но серьезная духовность.",
            "В 10-м доме: Успех в карьере через тяжелый труд, высокий статус.",
            "В 11-м доме: Прибыль через терпение, старшие друзья.",
            "В 12-м доме: Духовность, отречение, но изоляция."
        ],
        Rahu: [
            "В 1-м доме: Необычная личность, материальные амбиции. Может быть обман.",
            "Во 2-м доме: Нестандартные источники дохода, проблемы с речью.",
            "В 3-м доме: Смелость, успех через нестандартные методы.",
            "В 4-м доме: Беспокойство в доме, нестандартные отношения с матерью.",
            "В 5-м доме: Необычный интеллект, проблемы с детьми.",
            "В 6-м доме: Победа над врагами нестандартными методами.",
            "В 7-м доме: Необычный партнер, нестандартный брак.",
            "В 8-м доме: Интерес к тайным знаниям, трансформации.",
            "В 9-м доме: Нестандартные духовные взгляды.",
            "В 10-м доме: Успех в необычной карьере, высокие амбиции.",
            "В 11-м доме: Большие материальные желания, прибыль.",
            "В 12-м доме: Духовное освобождение, жизнь за границей."
        ],
        Ketu: [
            "В 1-м доме: Духовность, отстраненность, но неуверенность в себе.",
            "Во 2-м доме: Отстраненность от семьи, проблемы с речью.",
            "В 3-м доме: Храбрость, но отсутствие братьев/сестер.",
            "В 4-м доме: Отстраненность от матери, духовность дома.",
            "В 5-м доме: Духовный интеллект, но проблемы с детьми.",
            "В 6-м доме: Победа над врагами через духовность.",
            "В 7-м доме: Отстраненность в браке, духовный партнер.",
            "В 8-м доме: Духовная трансформация, интерес к мистике.",
            "В 9-м доме: Высокая духовность, отречение. Благоприятная позиция.",
            "В 10-м доме: Отстраненность от карьеры, духовная работа.",
            "В 11-м доме: Отсутствие желаний, духовные друзья.",
            "В 12-м доме: Мокша (освобождение), глубокая медитация. Лучшая позиция."
        ]
    }
};

/**
 * Получение полной трактовки планеты
 */
function getFullPlanetInterpretation(planetKey, planet, chartData) {
    const signIndex = planet.sign.index;
    const houseIndex = planet.house.index;
    
    let interpretation = {
        planet: planet.name,
        sign: planet.sign.name,
        house: planet.house.name,
        degree: planet.sign.degree.toFixed(2) + '°',
        strength: getPlanetStrength(planet, chartData),
        houseInterp: INTERPRETATIONS.planetInHouse[planetKey] ? 
            INTERPRETATIONS.planetInHouse[planetKey][houseIndex - 1] : 
            "Трактовка в разработке"
    };
    
    return interpretation;
}

/**
 * Получение трактовки асцендента
 */
function getAscendantInterpretation(signIndex) {
    return INTERPRETATIONS.ascendant[signIndex];
}

/**
 * Анализ йог в карте
 */
function analyzeYogas(chartData) {
    const yogas = [];
    
    const planets = chartData.planets;
    const moonSign = planets.Moon.sign.index;
    const jupiterSign = planets.Jupiter.sign.index;
    
    // Проверяем Гаджакесари Йогу
    let diff = (jupiterSign - moonSign + 12) % 12;
    if (diff === 0 || diff === 3 || diff === 6 || diff === 9) {
        yogas.push({
            name: "Гаджакесари Йога",
            description: "Юпитер находится в кендре от Луны. Это благоприятная йога, дающая мудрость, интеллект, успех в жизни, хорошую репутацию и материальное благополучие."
        });
    }
    
    // Проверяем Будхадитья Йогу
    if (planets.Sun.house.index === planets.Mercury.house.index) {
        yogas.push({
            name: "Будхадитья Йога",
            description: "Соединение Солнца и Меркурия в одном доме. Даёт острый интеллект, коммуникативные способности, успех в образовании и литературе."
        });
    }
    
    if (yogas.length === 0) {
        yogas.push({
            name: "Индивидуальная карта",
            description: "В карте присутствуют уникальные комбинации планет. Для детального анализа йог рекомендуется консультация с астрологом."
        });
    }
    
    return yogas;
}

/**
 * Генерация полной интерпретации карты
 */
function generateInterpretations(chartData) {
    const interpretations = {
        ascendant: getAscendantInterpretation(chartData.planets.Ascendant.sign.index),
        planets: {}
    };
    
    // Генерируем трактовки для всех планет
    const planetOrder = ['Sun', 'Moon', 'Mars', 'Mercury', 'Jupiter', 'Venus', 'Saturn', 'Rahu', 'Ketu'];
    
    planetOrder.forEach(key => {
        interpretations.planets[key] = getFullPlanetInterpretation(key, chartData.planets[key], chartData);
    });
    
    interpretations.yogas = analyzeYogas(chartData);
    
    return interpretations;
}
